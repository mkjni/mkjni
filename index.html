<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="msvalidate.01" content="A4D40B1AA5475B07D06649F7D8970D5F" />
  <meta name="verify-v1" content="unique-string">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="shortcut icon" type="image/png" href="https://www.jobnexusindia.com/Job-Nexus-India-Logo.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link href='https://fonts.googleapis.com/css?family=Arima Madurai' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800&family=Roboto:ital,wght@0,400;0,500;0,700;1,300;1,400;1,500&display=swap" rel="stylesheet">
</head>
<body>

<div class="filterc">
    <div class="filter-container">
        <div class="filter-job-id">
            <label class="filter-label">Job ID</label><br>
            <input type="text" id="jobIdFilter" class="filter-select">
        </div>
        <div class="filter-location">
            <label class="filter-label">State/Union Territory</label><br>
            <select id="locationFilter" class="filter-select">
                <option value="all">All States/UTs</option>
                <option value="AP">Andhra Pradesh - AP</option>
                <option value="AS">Assam - AS</option>
                <option value="BR">Bihar - BR</option>
                <option value="CH">Chandigarh - CH</option>
                <option value="CG">Chhattisgarh - CG</option>
                <option value="DL">Delhi - DL</option>
                <option value="GA">Goa - GA</option>
                <option value="GJ">Gujarat - GJ</option>
                <option value="HR">Haryana - HR</option>
                <option value="JK">Jammu and Kashmir - JK</option>
                <option value="JH">Jharkhand - JH</option>
                <option value="KA">Karnataka - KA</option>
                <option value="KL">Kerala - KL</option>
                <option value="MP">Madhya Pradesh - MP</option>
                <option value="MH">Maharashtra - MH</option>
                <option value="OR">Orissa/Odisha - OR</option>
                <option value="PY">Pondicherry - PY</option>
                <option value="PB">Punjab - PB</option>
                <option value="RJ">Rajasthan - RJ</option>
                <option value="TN">Tamil Nadu - TN</option>
                <option value="TG">Telangana - TG</option>
                <option value="UP">Uttar Pradesh - UP</option>
                <option value="WB">West Bengal - WB</option>
            </select>
        </div>
        <div class="filter-experience">
            <label class="filter-label">Experience Levels</label><br>
            <select id="experienceFilter" class="filter-select">
                <option value="all">All Experience Levels</option>
                <option value="0-2">0-2 Years - Junior Level</option>
                <option value="2-5">2-5 years - Associate Level</option>
                <option value="5-8">5-8 years - Mid Level</option>
                <option value="8+">8+ years - Senior Level</option>
            </select>
        </div>
    </div>
</div>

<br>

<input type="text" id="keywordFilter" placeholder="Search by keyword" class="filter-select">

<table id="jobTable">
    <thead>
        <tr>
            <th class="job-id">Job ID</th>
            <th class="job-title">Role/Job Title</th>
            <th class="location">S / UT</th>
            <th class="City">City</th> 
            <th class="experience">Experience</th>
            <th class="salary">Salary</th>
            <th class="job-status">Status</th>
        </tr>
    </thead>
    <tbody>
        <tr class="job-row"  onclick="window.open('https://www.jobnexusindia.com/jd/0066.html', '_blank');">
            <td class="job-id">0066</td>
            <td class="job-title">Guest Relations Executive</td>
            <td class="location">MH</td>
            <td class="City">Mumbai, Navi Mumbai, Thane and Raigad</td>
            <td class="experience" data-experience="0-2" >Freshers</td>
            <td class="salary">20000 - 25000 PM</td>
            <td class="job-status">
            <span class="status-text active">Active</span>
            </td>
        </tr>
        <tr class="job-row"  onclick="window.open('https://www.jobnexusindia.com/jd/0065.html', '_blank');">
            <td class="job-id">0065</td>
            <td class="job-title">Ladle Refining Shift Incharge - Steel Melting Shop</td>
            <td class="location">JH</td>
            <td class="City">Bokaro</td>
            <td class="experience" data-experience="5-8, 8+" >6 Months to 2 years</td>
            <td class="salary">Confidential</td>
            <td class="job-status">
            <span class="status-text on-hold">On Hold</span>
            </td>
        </tr>
    </tbody>
</table>

<div class="pagination-controls">
    <div>
        <button id="prevPage">Previous</button>
        <span id="currentPage">Page 1</span>
        <button id="nextPage">Next</button>
    </div>
    <div class="jobtablefilter"> 
        Jobs Per Page: 
        <select id="jobsPerPage">
            <option value="5">5 jobs</option>
            <option value="10" selected>10 jobs</option>
            <option value="15">15 jobs</option>
            <option value="20">20 jobs</option>
            <option value="25">25 jobs</option>
            <option value="all">All jobs</option>
        </select>
    </div>
</div>

<script>
    document.getElementById("locationFilter").addEventListener("change", filterJobs);
    document.getElementById("experienceFilter").addEventListener("change", filterJobs);
    document.getElementById("jobIdFilter").addEventListener("input", filterJobsById);
    document.getElementById("keywordFilter").addEventListener("input", filterJobsByKeyword);

    async function fetchJobDescription(url) {
        try {
            let response = await fetch(url);
            let text = await response.text();
            let parser = new DOMParser();
            let doc = parser.parseFromString(text, 'text/html');
            let bodyContainer = doc.querySelector('.bodycontainer');
            return bodyContainer ? bodyContainer.textContent.toLowerCase() : '';
        } catch (error) {
            console.error('Error fetching job description:', error);
            return '';
        }
    }

    async function filterJobsByKeyword() {
        let input = document.getElementById("keywordFilter").value.toLowerCase();
        let tableRows = document.querySelectorAll("#jobTable tbody tr");

        for (let row of tableRows) {
            let titleCell = row.querySelector(".job-title");
            let jobTitle = titleCell.textContent.toLowerCase();
            let jobDescriptionUrl = row.getAttribute("onclick").match(/'(.*?)'/)[1];
            let jobDescription = await fetchJobDescription(jobDescriptionUrl);

            if (jobTitle.includes(input) || jobDescription.includes(input)) {
                row.classList.remove('hidden');
            } else {
                row.classList.add('hidden');
            }
        }

        updatePagination(); // Update pagination after filtering
    }

    function filterJobs() {
        var selectedLocation = document.getElementById("locationFilter").value.toUpperCase();
        var selectedExperience = document.getElementById("experienceFilter").value;

        var tableRows = document.querySelectorAll("#jobTable tbody tr");

        tableRows.forEach(function(row) {
            var locationCell = row.querySelector(".location");
            var experienceCell = row.querySelector(".experience");
            var stateData = locationCell.textContent.trim().toUpperCase();
            var experienceData = experienceCell.dataset.experience.split(",");

            var showRow = experienceData.some(function(exp) {
                return exp.trim() === selectedExperience || selectedExperience === "all";
            });

            var locationMatch = (selectedLocation === "ALL" || stateData === selectedLocation);

            if (locationMatch && showRow) {
                row.classList.remove('hidden');
            } else {
                row.classList.add('hidden');
            }
        });

        updatePagination(); // Update pagination after filtering
    }

    function filterJobsById() {
        var input = document.getElementById("jobIdFilter").value.toLowerCase();
        var tableRows = document.querySelectorAll("#jobTable tbody tr");

        tableRows.forEach(function(row) {
            var jobIdCell = row.querySelector(".job-id");
            var jobId = jobIdCell.textContent.toLowerCase();

            if (jobId.indexOf(input) > -1) {
                row.classList.remove('hidden');
            } else {
                row.classList.add('hidden');
            }
        });

        updatePagination(); // Update pagination after filtering
    }

    document.addEventListener("DOMContentLoaded", function() {
        var currentPage = 1;
        var jobsPerPage = parseInt(document.getElementById("jobsPerPage").value);

        function updatePagination() {
            var tableRows = document.querySelectorAll("#jobTable tbody tr");
            var visibleRows = Array.from(tableRows).filter(function(row) {
                return !row.classList.contains('hidden');
            });

            var totalJobs = visibleRows.length;
            var totalPages = jobsPerPage === 'all' ? 1 : Math.ceil(totalJobs / jobsPerPage);

            if (jobsPerPage === 'all') {
                document.getElementById("currentPage").textContent = "Showing all jobs";
            } else {
                document.getElementById("currentPage").textContent = "Page " + currentPage + " of " + totalPages;
            }

            document.getElementById("prevPage").disabled = currentPage === 1;
            document.getElementById("nextPage").disabled = currentPage === totalPages;

            updateTableVisibility(visibleRows, totalJobs, totalPages);
        }

        function updateTableVisibility(visibleRows, totalJobs, totalPages) {
            visibleRows.forEach(function(row, index) {
                if (jobsPerPage === 'all' || (index >= (currentPage - 1) * jobsPerPage && index < currentPage * jobsPerPage)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        document.getElementById("jobsPerPage").addEventListener("change", function() {
            jobsPerPage = this.value === 'all' ? 'all' : parseInt(this.value);
            currentPage = 1;
            updatePagination();
        });

        document.getElementById("prevPage").addEventListener("click", function() {
            if (currentPage > 1) {
                currentPage--;
                updatePagination();
            }
        });

        document.getElementById("nextPage").addEventListener("click", function() {
            var tableRows = document.querySelectorAll("#jobTable tbody tr");
            var visibleRows = Array.from(tableRows).filter(function(row) {
                return !row.classList.contains('hidden');
            });

            var totalJobs = visibleRows.length;
            var totalPages = jobsPerPage === 'all' ? 1 : Math.ceil(totalJobs / jobsPerPage);

            if (currentPage < totalPages) {
                currentPage++;
                updatePagination();
            }
        });

        updatePagination();
    });
</script>

</body>
</html>
